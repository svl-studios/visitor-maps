var projectURL="http://127.0.0.1";var textDomain="visitor-maps";var destFile="visitor-maps.pot";var packageName="visitor-maps";var bugReport="https://www.svlstudios.com/contact";var lastTranslator="Kevin Provance <kevin.provance@gmail.com>";var team="SVL Studios <support@svlstudios.com>";var translatePath="./languages/";var styles=[{path:"./css/visitor-maps.scss",dest:"./css/"}];var imagesSRC="./img/**/*.{png,jpg,gif,svg}";var imagesDestination="./img/";var projectPHPWatchFiles="./**/*.php";var AUTOPREFIXER_BROWSERS=["last 2 version","> 1%","ie > 10","ie_mob > 10","ff >= 30","chrome >= 34","safari >= 7","opera >= 23","ios >= 7","android >= 4","bb >= 10"];var gulp=require("gulp");var sass=require("gulp-sass");var minifycss=require("gulp-uglifycss");var autoprefixer=require("gulp-autoprefixer");var mmq=require("gulp-merge-media-queries");var concat=require("gulp-concat");var uglify=require("gulp-uglify");var jshint=require("gulp-jshint");var eslint=require("gulp-eslint");var imagemin=require("gulp-imagemin");var rename=require("gulp-rename");var lineec=require("gulp-line-ending-corrector");var filter=require("gulp-filter");var sourcemaps=require("gulp-sourcemaps");var browserSync=require("browser-sync").create();var wpPot=require("gulp-wp-pot");var sort=require("gulp-sort");var merge=require("merge-stream");var sassPackager=require("gulp-sass-packager");sass.compiler=require("node-sass");gulp.task("browser-sync",function(){"use strict";browserSync.init({proxy:projectURL,open:true,injectChanges:true})});function processScss(source,dest,addMin){"use strict";var process=gulp.src(source,{allowEmpty:true}).pipe(sourcemaps.init()).pipe(sass({indentType:"tab",indentWidth:1,errLogToConsole:true,outputStyle:"compact",precision:10})).on("error",console.error.bind(console)).pipe(sourcemaps.write({includeContent:false})).pipe(sourcemaps.init({loadMaps:true})).pipe(autoprefixer(AUTOPREFIXER_BROWSERS)).pipe(sourcemaps.write("./")).pipe(lineec()).pipe(gulp.dest(dest)).pipe(filter("**/*.css")).pipe(mmq({log:true})).pipe(browserSync.stream());if(addMin){process=process.pipe(rename({suffix:".min"})).pipe(minifycss({maxLineLen:0})).pipe(lineec()).pipe(gulp.dest(dest)).pipe(filter("**/*.css")).pipe(browserSync.stream())}return process}gulp.task("styles",function(done){"use strict";var core=styles.map(function(file){return processScss(file.path,file.dest,true)});return merge(core)});function visitorMapsJS(done){"use strict";gulp.src("./js/visitor-maps.js").pipe(jshint()).pipe(jshint.reporter("default")).pipe(eslint()).pipe(eslint.format()).pipe(rename({basename:"visitor-maps",suffix:".min"})).pipe(uglify()).pipe(lineec()).pipe(gulp.dest("./js/"));done()}function ajaxJS(done){"use strict";gulp.src("./js/ajax.js").pipe(jshint()).pipe(jshint.reporter("default")).pipe(eslint()).pipe(eslint.format()).pipe(rename({basename:"ajax",suffix:".min"})).pipe(uglify()).pipe(lineec()).pipe(gulp.dest("./js/"));done()}function images(done){"use strict";gulp.src(imagesSRC).pipe(imagemin({progressive:true,optimizationLevel:3,interlaced:true,svgoPlugins:[{removeViewBox:false}]})).pipe(gulp.dest(imagesDestination));done()}function translate(){"use strict";return gulp.src(projectPHPWatchFiles).pipe(sort()).pipe(wpPot({domain:textDomain,destFile:destFile,package:packageName,bugReport:bugReport,lastTranslator:lastTranslator,team:team})).pipe(gulp.dest(translatePath+"/"+destFile))}gulp.task("allStyles",gulp.series("styles"));gulp.task("allJS",gulp.series(visitorMapsJS,ajaxJS));gulp.task("visitorMapJS",visitorMapsJS);gulp.task("ajaxJS",ajaxJS);gulp.task("images",images);gulp.task("translate",translate);gulp.task("default",gulp.series("allStyles","allJS","translate"));